if("undefined"==typeof define){var iRTC={};define=function(a,b,c){"irtc"!==a?iRTC[a]=c.call(iRTC):iRTC=c.call(iRTC)},require={config:function(){}}}define("video",[],function(){var a={start:function(a,b){var c=this.video=document.querySelector(a);return videoSource=window.webkitURL?window.webkitURL.createObjectURL(b):window.URL.createObjectURL(b),c.autoplay=!0,c.src=videoSource,c}};return a}),define("helpers",[],function(){var a={extend:function(){for(var a={},b=arguments.length-1;b>=0;b--){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}};return a}),define("events",[],function(){var a={_events:{},on:function(a,b,c){var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c||this}),this},trigger:function(a,b){console.log("triggered "+a);for(var c=this._events[a],d=0,e=c?c.length:0;e>d;)c[d].callback.call(c[d].context,b),d++}};return a}),define("camera",["video","helpers","events"],function(a,b,c){if(0===arguments.length)var a=this.video,b=this.helpers,c=this.events;var d={type:"camera",is:function(b,c,d){var e=this;navigator.getUserMedia||(navigator.getUserMedia=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia),this.getStream=function(){return e.stream},this.getVideo=function(){return e.video},navigator.getUserMedia?(console.log("congrats, you have getUserMedia!"),navigator.getUserMedia({video:!0},function(f){e.stream=f,e.video=a.start(b,f,c,d),e.trigger("hasVideo",{video:e.video,origin:e})},function(){console.log("it failed!")})):alert("Camera Feature is not supported in this browser.")}};return d=b.extend(d,c)}),define("canvas",["helpers","events"],function(a,b){if(0===arguments.length)var a=this.helpers,b=this.events;var c={isPlaying:!1,width:0,height:0,is:function(a,b){this.sourceCtx=document.querySelector(a).getContext("2d"),"undefined"!=typeof b&&this.on("hasVideo",function(a){b==a.origin?this.createVideoStream(a.video):console.log("not it!")})},createVideoStream:function(a){return this.video=a,this.width=a.width,this.height=a.height,this.drawImage(),this.start(),this.getImage()},drawImage:function(){this.sourceCtx.drawImage(this.video,0,0,this.video.width,this.video.height)},getImage:function(){return this.sourceCtx.getImageData(0,0,this.video.width,this.video.height)},play:function(a){var b=this;return setInterval(function(){b.isPlaying&&b.drawImage()},a)},stop:function(){this.isPlaying=!1,window.clearInterval(this.playing)},start:function(a){"undefined"==typeof a&&(a=15),this.isPlaying=!0,this.playing=this.play(15)}};return c=a.extend(c,b)}),require.config({baseUrl:"public/js/src/modules"}),define("irtc",["camera","canvas"],function(a,b){if(0===arguments.length){this.exp=!0;var a=this.camera,b=this.canvas}var c=function(){this._modules={camera:a,canvas:b},this.create=function(a){var b=this;if(!this._modules.hasOwnProperty(a))throw"There is no such module name!";if(Object.create)return Object.create(this._modules[a]);var c=function(){return b._modules[a]};return c()}};return new c});